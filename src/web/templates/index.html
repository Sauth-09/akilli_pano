<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ school_name }} - Akƒ±llƒ± Pano</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='logo.ico') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="perf-{{ data.performance_mode if data.performance_mode else 'high' }}">
    <!-- Custom Context Menu -->
    <div id="custom-context-menu" class="context-menu">
        <div class="menu-item" id="menu-fullscreen">
            <i class="fas fa-expand"></i> Tam Ekran
        </div>
        <div class="menu-item" id="menu-settings">
            <i class="fas fa-cog"></i> Ayarlar
        </div>
    </div>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo-container">
                <img src="{{ logo_url }}" alt="Okul Logosu" class="logo">
            </div>
            <div class="school-title-container">
                <h1>{{ school_name }}</h1>
            </div>
            <div class="date-time">
                <div id="date">01.01.2023</div>
                <div id="clock">00:00</div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div id="slideshow-container">
                <div id="loading-message">Y√ºkleniyor...</div>
                <img id="slide-img" src="" style="display: none;">
                <video id="slide-video" src="" style="display: none;" muted autoplay></video>
            </div>
        </main>

        <!-- Left Sidebar -->
        <aside class="sidebar-left">
            {% set ns = namespace(count=0) %}
            {% for item in layout %}
                {% if item.visible %}
                    {% set ns.count = ns.count + 1 %}
                {% endif %}
            {% endfor %}
            {% set half = (ns.count + 1) // 2 %}
            {% set ns2 = namespace(idx=0) %}
            {% for item in layout %}
                {% if item.visible %}
                    {% set ns2.idx = ns2.idx + 1 %}
                    {% if ns2.idx <= half %}
                    
                    {% if item.type == 'status' %}
                    <div class="card status-card" id="{{ item.id }}">
                        <div id="status-header">
                            <div id="current-status" class="status-text">Y√ºkleniyor...</div>
                        </div>
                        <div id="class-list-container">
                            <ul id="class-list"></ul>
                        </div>
                    </div>

                    {% elif item.type == 'duty' %}
                    <div class="card duty-card" id="{{ item.id }}">
                        <h2>üë®‚Äçüè´ {{ item.title }}</h2>
                        <ul id="duty-list">
                            <li>Y√ºkleniyor...</li>
                        </ul>
                    </div>

                    {% elif item.type == 'quote' %}
                    <div class="card message-card" id="{{ item.id }}">
                        <h2>üì¢ {{ item.title }}</h2>
                        <div id="daily-message" class="message-text">...</div>
                    </div>

                    {% elif item.type == 'countdown' %}
                    <div class="card countdown-card" id="{{ item.id }}">
                        <h2>‚è≥ {{ item.title }}</h2>
                        <div id="countdown" class="countdown-text">...</div>
                    </div>

                    {% elif item.type == 'birthdays' %}
                    <div id="birthday-container-wrapper" style="margin-bottom: 20px;">
                         <div id="birthday-container-hook" data-title="{{ item.title }}"></div>
                    </div>

                    {% elif item.type == 'classes' %}
                    <!-- Merged into status card -->

                    {% elif item.type == 'riddle' %}
                    <div class="card riddle-card" id="{{ item.id }}">
                        <h2>‚ùì {{ item.title }}</h2>
                        <div id="riddle-container" class="riddle-content" style="position: relative; width: 100%; min-height: 200px; display: flex; align-items: center; justify-content: center; background: #f8f9fa; border-radius: 8px; overflow: hidden;">
                            <img id="riddle-img" src="" style="width: 100%; height: auto; display: none;">
                            <video id="riddle-video" src="" style="width: 100%; height: auto; display: none;" muted autoplay loop></video>
                            <div id="riddle-loading" style="color: #666;">Y√ºkleniyor...</div>
                            <div id="riddle-empty" style="display: none; color: #666; padding: 20px; text-align: center;">Hen√ºz bilmece yok.</div>
                        </div>
                    </div>
                    {% endif %}

                    {% endif %}
                {% endif %}
            {% endfor %}
        </aside>

        <!-- Right Sidebar -->
        <aside class="sidebar-right">
            {% set ns3 = namespace(idx=0) %}
            {% for item in layout %}
                {% if item.visible %}
                    {% set ns3.idx = ns3.idx + 1 %}
                    {% if ns3.idx > half %}
                    
                    {% if item.type == 'status' %}
                    <div class="card status-card" id="{{ item.id }}">
                        <div id="status-header">
                            <div id="current-status" class="status-text">Y√ºkleniyor...</div>
                        </div>
                        <div id="class-list-container">
                            <ul id="class-list"></ul>
                        </div>
                    </div>

                    {% elif item.type == 'duty' %}
                    <div class="card duty-card" id="{{ item.id }}">
                        <h2>üë®‚Äçüè´ {{ item.title }}</h2>
                        <ul id="duty-list">
                            <li>Y√ºkleniyor...</li>
                        </ul>
                    </div>

                    {% elif item.type == 'quote' %}
                    <div class="card message-card" id="{{ item.id }}">
                        <h2>üì¢ {{ item.title }}</h2>
                        <div id="daily-message" class="message-text">...</div>
                    </div>

                    {% elif item.type == 'countdown' %}
                    <div class="card countdown-card" id="{{ item.id }}">
                        <h2>‚è≥ {{ item.title }}</h2>
                        <div id="countdown" class="countdown-text">...</div>
                    </div>

                    {% elif item.type == 'birthdays' %}
                    <div id="birthday-container-wrapper" style="margin-bottom: 20px;">
                         <div id="birthday-container-hook" data-title="{{ item.title }}"></div>
                    </div>

                    {% elif item.type == 'classes' %}
                    <!-- Merged into status card -->

                    {% elif item.type == 'riddle' %}
                    <div class="card riddle-card" id="{{ item.id }}">
                        <h2>‚ùì {{ item.title }}</h2>
                        <div id="riddle-container" class="riddle-content" style="position: relative; width: 100%; min-height: 200px; display: flex; align-items: center; justify-content: center; background: #f8f9fa; border-radius: 8px; overflow: hidden;">
                            <img id="riddle-img" src="" style="width: 100%; height: auto; display: none;">
                            <video id="riddle-video" src="" style="width: 100%; height: auto; display: none;" muted autoplay loop></video>
                            <div id="riddle-loading" style="color: #666;">Y√ºkleniyor...</div>
                            <div id="riddle-empty" style="display: none; color: #666; padding: 20px; text-align: center;">Hen√ºz bilmece yok.</div>
                        </div>
                    </div>
                    {% endif %}

                    {% endif %}
                {% endif %}
            {% endfor %}
        </aside>

        <!-- Footer (Scrolling Layout) -->
        <footer class="footer">
            <div class="marquee-content" id="footer-marquee" style="
                animation-duration: {{ data.marquee.duration if data.marquee else '30' }}s;
                font-size: {{ data.marquee.font_size if data.marquee else '1.2' }}rem;
                color: {{ data.marquee.color if data.marquee else '#2c3e50' }};
                font-family: {{ data.marquee.font_family if data.marquee else 'inherit' }};
            ">
                {{ data.messages | join('   ‚Ä¢   ') if data.messages else 'Akƒ±llƒ± Okul Panosu Sistemine Ho≈ügeldiniz' }}
            </div>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
